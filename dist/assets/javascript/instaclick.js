var instantClick,InstantClick=instantClick=function(e,t,n){function r(e){var t=e.indexOf("#");return t<0?e:e.substr(0,t)}function i(e){for(;e&&"A"!=e.nodeName;)e=e.parentNode;return e}function o(e){do{if(!e.hasAttribute)break;if(e.hasAttribute("data-instant"))return!1;if(e.hasAttribute("data-no-instant"))return!0}while(e=e.parentNode);return!1}function a(e){var n=t.protocol+"//"+t.host;return!(e.target||e.hasAttribute("download")||0!=e.href.indexOf(n+"/")||e.href.indexOf("#")>-1&&r(e.href)==E||o(e))}function s(e,t,n,r){for(var i=!1,o=0;o<q[e].length;o++)if("receive"==e){var a=q[e][o](t,n,r);a&&("body"in a&&(n=a.body),"title"in a&&(r=a.title),i=a)}else q[e][o](t,n,r);return i}function f(t,n,i,o,a){if(e.documentElement.replaceChild(n,e.body),i){history.pushState(null,null,i);var f=i.indexOf("#"),d=f>-1&&e.getElementById(i.substr(f+1)),c=0;if(d)for(;d.offsetParent;)c+=d.offsetTop,d=d.offsetParent;scrollTo(0,c),E=r(i)}else scrollTo(0,o);Y&&e.title==t?e.title=t+String.fromCharCode(160):e.title=t,g(),a?s("restore"):s("change",!1)}function d(){K=!1,P=!1}function c(e){return e.replace(/<noscript[\s\S]+?<\/noscript>/gi,"")}function u(e){if(!(x>+new Date-500)){var t=i(e.target);t&&a(t)&&y(t.href)}}function l(e){if(!(x>+new Date-500)){var t=i(e.target);t&&a(t)&&(t.addEventListener("mouseout",p),O?(A=t.href,C=setTimeout(y,O)):y(t.href))}}function h(e){x=+new Date;var t=i(e.target);t&&a(t)&&(H?t.removeEventListener("mousedown",u):t.removeEventListener("mouseover",l),y(t.href))}function v(e){var t=i(e.target);t&&a(t)&&(e.which>1||e.metaKey||e.ctrlKey||(e.preventDefault(),w(t.href)))}function p(){return C?(clearTimeout(C),void(C=!1)):void(K&&!P&&(D.abort(),d()))}function m(){if(!(D.readyState<4)&&0!=D.status){if(I.ready=+new Date-I.start,D.getResponseHeader("Content-Type").match(/\/(x|ht|xht)ml/)){var t=e.implementation.createHTMLDocument("");t.documentElement.innerHTML=c(D.responseText),S=t.title,B=t.body;var n=s("receive",k,B,S);n&&("body"in n&&(B=n.body),"title"in n&&(S=n.title));var i=r(k);M[i]={body:B,title:S,scrollY:i in M?M[i].scrollY:0};for(var o,a,f=t.head.children,d=0,u=0;u<f.length;u++)if(o=f[u],o.hasAttribute("data-instant-track")){a=o.getAttribute("href")||o.getAttribute("src")||o.innerHTML;for(var l=0;l<R.length;l++)R[l]==a&&d++}d!=R.length&&(N=!0)}else N=!0;P&&(P=!1,w(k))}}function b(){var e=r(t.href);if(e!=E){if(!(e in M))return void(t.href=t.href);M[E].scrollY=pageYOffset,E=e,f(M[e].title,M[e].body,!1,M[e].scrollY,!0)}}function g(t){if(e.body.addEventListener("touchstart",h,!0),H?e.body.addEventListener("mousedown",u,!0):e.body.addEventListener("mouseover",l,!0),e.body.addEventListener("click",v,!0),!t)for(var n,r,i,o,a=e.body.getElementsByTagName("script"),s=0,f=a.length;s<f;s++)n=a[s],n.hasAttribute("data-no-instant")||(r=e.createElement("script"),n.src&&(r.src=n.src),n.innerHTML&&(r.innerHTML=n.innerHTML),i=n.parentNode,o=n.nextSibling,i.removeChild(n),i.insertBefore(r,o))}function y(e){!H&&"display"in I&&+new Date-(I.start+I.display)<100||(C&&(clearTimeout(C),C=!1),e||(e=A),K&&(e==k||P)||(K=!0,P=!1,k=e,B=!1,N=!1,I={start:+new Date},s("fetch"),D.open("GET",e),D.send()))}function w(e){return"display"in I||(I.display=+new Date-I.start),C||!K?C&&k&&k!=e?void(t.href=e):(y(e),s("wait"),void(P=!0)):P?void(t.href=e):N?void(t.href=k):B?(M[E].scrollY=pageYOffset,d(),void f(S,B,k)):(s("wait"),void(P=!0))}function L(n){if(!E){if(!G)return void s("change",!0);"mousedown"==n?H=!0:"number"==typeof n&&(O=n),E=r(t.href),M[E]={body:e.body,title:e.title,scrollY:pageYOffset};for(var i,o,a=e.head.children,f=0;f<a.length;f++)i=a[f],i.hasAttribute("data-instant-track")&&(o=i.getAttribute("href")||i.getAttribute("src")||i.innerHTML,R.push(o));D=new XMLHttpRequest,D.addEventListener("readystatechange",m),g(!0),s("change",!0),addEventListener("popstate",b)}}function T(e,t){q[e].push(t)}var E,A,C,x,D,H,O,Y=n.indexOf(" CriOS/")>-1,M={},k=!1,S=!1,N=!1,B=!1,I={},K=!1,P=!1,R=[],q={fetch:[],receive:[],wait:[],change:[],restore:[]},G="pushState"in history&&(!n.match("Android")||n.match("Chrome/"))&&"file:"!=t.protocol;return{supported:G,init:L,on:T}}(document,location,navigator.userAgent);